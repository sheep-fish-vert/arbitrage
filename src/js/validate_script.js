function validate(e,t){var n={errorFunction:null,submitFunction:null,highlightFunction:null,unhighlightFunction:null};$.extend(n,t);var a=$(e);a.length&&void 0===a.attr("novalidate")&&(a.on("submit",function(e){e.preventDefault()}),a.validate({errorClass:"errorText",focusCleanup:!0,focusInvalid:!1,invalidHandler:function(t,a){"function"==typeof n.errorFunction&&n.errorFunction(e)},errorPlacement:function(e,t){e.appendTo(t.closest(".form_input"))},highlight:function(t,a,i){$(t).addClass("error"),$(t).closest(".form_row").addClass("error").removeClass("valid"),"function"==typeof n.highlightFunction&&n.highlightFunction(e)},unhighlight:function(t,a,i){$(t).removeClass("error"),$(t).closest(".form_row").is(".error")&&$(t).closest(".form_row").removeClass("error").addClass("valid"),"function"==typeof n.unhighlightFunction&&n.unhighlightFunction(e)},submitHandler:function(e){"function"==typeof n.submitFunction?n.submitFunction(e):a[0].submit()}}),$("[required]",a).each(function(){$(this).rules("add",{required:!0,messages:{required:"Вы пропустили"}})}),$('[type="email"]',a).length&&$('[type="email"]',a).rules("add",{messages:{email:"Невалидный email"}}),$(".tel-mask[required]",a).length&&$(".tel-mask[required]",a).rules("add",{messages:{required:"Введите номер мобильного телефона."}}),$('[type="password"]',a).each(function(){1==$(this).is("#re_password")&&$(this).rules("add",{minlength:3,equalTo:"#password",messages:{equalTo:"Неверный пароль.",minlength:"Недостаточно символов."}})}))}function validationCall(e){var t=$(e),n=t.serialize();$.ajax({url:ajaxUrl,data:n,method:"POST",success:function(e){"true"==e.trim()?(t.trigger("reset"),popNext("#call_success","call-popup")):t.trigger("reset")}})}function validationCallDocument(e){var t=$(e),n=new FormData($(e)[0]);n.append("file",t.find("input[type=file]")[0].files[0]),$.ajax({url:t.attr("action"),type:"POST",data:n,contentType:!1,processData:!1,cache:!1,success:function(e){t.trigger("reset"),popNext("#call_success","call-popup")}})}function validationCallDocuments(e){var t=$(e),n=new FormData($(e)[0]);$.each(t.find('input[type="file"]')[0].files,function(e,t){n.append("file["+e+"]",t)}),$.ajax({url:t.attr("action"),type:"POST",data:n,contentType:!1,processData:!1,cache:!1,success:function(e){t.trigger("reset"),popNext("#call_success","call-popup")}})}function popNext(e,t){$.fancybox.open(e,{padding:0,fitToView:!0,wrapCSS:t,autoSize:!0,afterClose:function(){$("form").trigger("reset"),clearTimeout(n)}});var n=null;n=setTimeout(function(){$("form").trigger("reset"),$.fancybox.close(e)},2e3)}function Maskedinput(){$(".tel-mask")&&$(".tel-mask").mask("+9 (999) 999-99-99")}function fancyboxForm(){$(".fancybox-form").fancybox({openEffect:"fade",closeEffect:"fade",autoResize:!0,wrapCSS:"fancybox-form",closeBtn:!0,fitToView:!0,padding:"0"})}function someAjax(e,t,n,a){$(document).on("click",e,function(e){e.preventDefault();var i=$(this),o=null;o="function"==typeof a?a(i):a,console.log(o),$.ajax({url:t,data:o,method:"POST",success:function(e){n(e,i)}})})}function connectAjax(e){var t=$(e),n=t.serialize();sortableObject={orderMassive:{},tuzerMassives:{}},$("#block-5-sortable1 ul").each(function(e){var t=e+1;$(this).find("li").length?sortableObject.orderMassive[t]=$(this).find("li span").attr("data-name"):sortableObject.orderMassive[t]="none"}),$(".drag-field-main").each(function(e){var t="tuzer-massive-"+(e+1);sortableObject.tuzerMassives[t]=[],$(this).find("li").each(function(e){sortableObject.tuzerMassives[t].push($(this).find("img").attr("data-tuzer-name"))})}),$.ajax({url:ajaxUrl,data:{formInfo:n,sortableQuestions:sortableObject},method:"POST",success:function(e){"true"==e.trim()?(t.trigger("reset"),popNext("#call_success","call-popup")):t.trigger("reset")}})}$(document).ready(function(){validate(".connect-form",{submitFunction:connectAjax}),Maskedinput(),fancyboxForm()});